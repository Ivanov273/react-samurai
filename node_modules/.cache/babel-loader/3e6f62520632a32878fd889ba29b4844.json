{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\React\\\\Project\\\\react2.0\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _toConsumableArray from\"C:\\\\React\\\\Project\\\\react2.0\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _objectSpread from\"C:\\\\React\\\\Project\\\\react2.0\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _regeneratorRuntime from\"C:\\\\React\\\\Project\\\\react2.0\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{usersAPI}from\"../api/api\";import actions from\"redux-form/lib/actions\";var FOLLOW='FOLLOW';var UNFOLLOW='UNFOLLOW';var SETUSERS='SETUSERS';var SETPAGE='SETPAGE';var TOGLE='TOGLE';var TOGLE_PROGRESS='TOGLE_PROGRESS';var initstate={users:[],TotalCount:50,pagesize:10,portionsize:10,currentPage:1,isfetching:true,isfetchingprogress:[],fake:10};var reducerUsers=function reducerUsers(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initstate;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case FOLLOW:return _objectSpread(_objectSpread({},state),{},{users:state.users.map(function(u){if(u.id===action.userid){return _objectSpread(_objectSpread({},u),{},{followed:true});}return u;})});case UNFOLLOW:return _objectSpread(_objectSpread({},state),{},{users:state.users.map(function(u){if(u.id===action.userid){return _objectSpread(_objectSpread({},u),{},{followed:false});}return u;})});case SETUSERS:return _objectSpread(_objectSpread({},state),{},{users:_toConsumableArray(action.users),TotalCount:action.totalCount});case SETPAGE:return _objectSpread(_objectSpread({},state),{},{currentPage:action.page});case TOGLE:return _objectSpread(_objectSpread({},state),{},{isfetching:action.fetching});case TOGLE_PROGRESS:return _objectSpread(_objectSpread({},state),{},{isfetchingprogress:action.isfetching?[].concat(_toConsumableArray(state.isfetchingprogress),[action.id]):state.isfetchingprogress.filter(function(id){return id!=action.id;})});default:return state;}};export var OnFollow=function OnFollow(userid){return{type:FOLLOW,userid:userid};};export var UnFollow=function UnFollow(userid){return{type:UNFOLLOW,userid:userid};};export var SetUsers=function SetUsers(users,totalCount){return{type:SETUSERS,users:users,totalCount:totalCount};};export var SetPage=function SetPage(page){return{type:SETPAGE,page:page};};export var Togle=function Togle(fetching){return{type:TOGLE,fetching:fetching};};export var TogleProgressFetching=function TogleProgressFetching(isfetching,id){return{type:TOGLE_PROGRESS,isfetching:isfetching,id:id};};export var getUsersThunkCreator=function getUsersThunkCreator(currentPage,pagesize){return function(dispatch){dispatch(Togle(true));usersAPI.getUsersApi(currentPage,pagesize).then(function(data){dispatch(SetUsers(data.items,data.totalCount));dispatch(SetPage(currentPage));dispatch(Togle(false));});};};var FollowUnfollowFlow=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id,dispatch,ApiMethod,actionCreator){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(TogleProgressFetching(true,id));_context.next=3;return ApiMethod;case 3:response=_context.sent;if(response.data.resultCode==0){dispatch(actionCreator(id));}dispatch(TogleProgressFetching(false,id));case 6:case\"end\":return _context.stop();}}},_callee);}));return function FollowUnfollowFlow(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();export var followUsersThunkCreator=function followUsersThunkCreator(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var ApiMethod;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:ApiMethod=usersAPI.getunFollowUsersApi(id);FollowUnfollowFlow(id,dispatch,ApiMethod,UnFollow);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x5){return _ref2.apply(this,arguments);};}();};export var unfollowUsersThunkCreator=function unfollowUsersThunkCreator(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var ApiMethod;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ApiMethod=usersAPI.getFollowUsersApi(id);FollowUnfollowFlow(id,dispatch,ApiMethod,OnFollow);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x6){return _ref3.apply(this,arguments);};}();};export default reducerUsers;","map":{"version":3,"sources":["C:/React/Project/react2.0/src/Redux/Reducer-Users.js"],"names":["usersAPI","actions","FOLLOW","UNFOLLOW","SETUSERS","SETPAGE","TOGLE","TOGLE_PROGRESS","initstate","users","TotalCount","pagesize","portionsize","currentPage","isfetching","isfetchingprogress","fake","reducerUsers","state","action","type","map","u","id","userid","followed","totalCount","page","fetching","filter","OnFollow","UnFollow","SetUsers","SetPage","Togle","TogleProgressFetching","getUsersThunkCreator","dispatch","getUsersApi","then","data","items","FollowUnfollowFlow","ApiMethod","actionCreator","response","resultCode","followUsersThunkCreator","getunFollowUsersApi","unfollowUsersThunkCreator","getFollowUsersApi"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../api/api\";\r\nimport actions from \"redux-form/lib/actions\";\r\n\r\nconst FOLLOW = 'FOLLOW'\r\nconst UNFOLLOW = 'UNFOLLOW'\r\nconst SETUSERS = 'SETUSERS'\r\nconst SETPAGE = 'SETPAGE'\r\nconst TOGLE = 'TOGLE'\r\nconst TOGLE_PROGRESS = 'TOGLE_PROGRESS'\r\n\r\nlet initstate = {\r\n    users: [],\r\n    TotalCount: 50,\r\n    pagesize: 10,\r\n    portionsize: 10,\r\n    currentPage: 1,\r\n    isfetching: true,\r\n    isfetchingprogress: [],\r\n    fake: 10\r\n}\r\n\r\nconst reducerUsers = (state = initstate, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW :\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id === action.userid) {\r\n                        return {...u, followed: true}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n        case UNFOLLOW :\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => {\r\n                    if (u.id === action.userid) {\r\n\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n        case SETUSERS:\r\n            return {\r\n                ...state,\r\n                users: [...action.users],\r\n                TotalCount: action.totalCount\r\n            }\r\n        case SETPAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.page\r\n            }\r\n        case TOGLE:\r\n            return {\r\n                ...state,\r\n                isfetching: action.fetching\r\n            }\r\n        case TOGLE_PROGRESS:\r\n            return {\r\n                ...state,\r\n                isfetchingprogress: action.isfetching ?\r\n                    [...state.isfetchingprogress, action.id]\r\n                    : state.isfetchingprogress.filter(id => id != action.id)\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const OnFollow = (userid) => ({type: FOLLOW, userid})\r\nexport const UnFollow = (userid) => ({type: UNFOLLOW, userid})\r\nexport const SetUsers = (users,totalCount) => ({type: SETUSERS, users,totalCount})\r\nexport const SetPage = (page) => ({type: SETPAGE, page})\r\nexport const Togle = (fetching) => ({type: TOGLE, fetching})\r\nexport const TogleProgressFetching = (isfetching, id) => ({type: TOGLE_PROGRESS, isfetching, id})\r\n\r\nexport const getUsersThunkCreator = (currentPage, pagesize) => {\r\n    return (dispatch) => {\r\n        dispatch(Togle(true))\r\n        usersAPI.getUsersApi(currentPage, pagesize).then(data => {\r\n            dispatch(SetUsers(data.items,data.totalCount))\r\n            dispatch(SetPage(currentPage))\r\n            dispatch(Togle(false))\r\n        })\r\n    }\r\n}\r\nconst FollowUnfollowFlow = async (id, dispatch, ApiMethod, actionCreator) => {\r\n    dispatch(TogleProgressFetching(true, id))\r\n    let response = await ApiMethod\r\n    if (response.data.resultCode == 0) {\r\n        dispatch(actionCreator(id))\r\n    }\r\n    dispatch(TogleProgressFetching(false, id))\r\n}\r\nexport const followUsersThunkCreator = (id) => {\r\n    return async (dispatch) => {\r\n        let ApiMethod = usersAPI.getunFollowUsersApi(id)\r\n        FollowUnfollowFlow(id, dispatch, ApiMethod, UnFollow)\r\n    }\r\n}\r\nexport const unfollowUsersThunkCreator = (id) => {\r\n    return async (dispatch) => {\r\n        let ApiMethod = usersAPI.getFollowUsersApi(id)\r\n        FollowUnfollowFlow(id, dispatch, ApiMethod, OnFollow)\r\n    }\r\n}\r\nexport default reducerUsers"]},"metadata":{},"sourceType":"module"}