{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\React\\\\Project\\\\react2.0\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _objectSpread from\"C:\\\\React\\\\Project\\\\react2.0\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _regeneratorRuntime from\"C:\\\\React\\\\Project\\\\react2.0\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{usersAPI}from\"../api/api\";import{stopSubmit}from\"redux-form\";var SETAUTH='SETAUTH';var initstate={userid:'',login:'',email:'',isAuth:'false'};var reducerAuth=function reducerAuth(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initstate;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SETAUTH:return _objectSpread(_objectSpread({},state),action.data);default:return state;}};export var SetAuth=function SetAuth(userid,login,email,isAuth){return{type:SETAUTH,data:{userid:userid,login:login,email:email,isAuth:isAuth}};};export var AuthThunk=function AuthThunk(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response,_response$data$data,id,login,email;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return usersAPI.apiAuth();case 2:response=_context.sent;if(response.data.resultCode===0){_response$data$data=response.data.data,id=_response$data$data.id,login=_response$data$data.login,email=_response$data$data.email;dispatch(SetAuth(id,login,email,true));}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var AuthThunkLogin=function AuthThunkLogin(email,password,rememberMe){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return usersAPI.apiLogin(email,password,rememberMe);case 2:response=_context2.sent;if(response.data.resultCode===0){dispatch(AuthThunk());}else{dispatch(stopSubmit('loginform',{_error:response.data.messages[0]}));}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var AuthThunkDeleteLogin=function AuthThunkDeleteLogin(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return usersAPI.apiDeleteLogin();case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(SetAuth(null,null,null,false));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default reducerAuth;","map":{"version":3,"sources":["C:/React/Project/react2.0/src/Redux/Reducer-Auth.js"],"names":["usersAPI","stopSubmit","SETAUTH","initstate","userid","login","email","isAuth","reducerAuth","state","action","type","data","SetAuth","AuthThunk","dispatch","apiAuth","response","resultCode","id","AuthThunkLogin","password","rememberMe","apiLogin","_error","messages","AuthThunkDeleteLogin","apiDeleteLogin"],"mappings":"yWAAA,OAAQA,QAAR,KAAuB,YAAvB,CACA,OAAQC,UAAR,KAAyB,YAAzB,CAEA,GAAMC,CAAAA,OAAO,CAAG,SAAhB,CAEA,GAAIC,CAAAA,SAAS,CAAG,CACZC,MAAM,CAAE,EADI,CAEZC,KAAK,CAAE,EAFK,CAGZC,KAAK,CAAE,EAHK,CAIZC,MAAM,CAAE,OAJI,CAAhB,CAMA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAA+B,IAA9BC,CAAAA,KAA8B,2DAAtBN,SAAsB,IAAXO,CAAAA,MAAW,2CAC/C,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKT,CAAAA,OAAL,CACI,sCACOO,KADP,EAEOC,MAAM,CAACE,IAFd,EAKJ,QACI,MAAOH,CAAAA,KAAP,CARR,CAUH,CAXD,CAYA,MAAO,IAAMI,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACT,MAAD,CAASC,KAAT,CAAgBC,KAAhB,CAAuBC,MAAvB,QAAmC,CAACI,IAAI,CAAET,OAAP,CAAgBU,IAAI,CAAE,CAACR,MAAM,CAANA,MAAD,CAASC,KAAK,CAALA,KAAT,CAAgBC,KAAK,CAALA,KAAhB,CAAuBC,MAAM,CAANA,MAAvB,CAAtB,CAAnC,EAAhB,CACP,MAAO,IAAMO,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,kGAAM,iBAAOC,QAAP,wLACNf,CAAAA,QAAQ,CAACgB,OAAT,EADM,QACvBC,QADuB,eAE3B,GAAIA,QAAQ,CAACL,IAAT,CAAcM,UAAd,GAA6B,CAAjC,CAAoC,qBACPD,QAAQ,CAACL,IAAT,CAAcA,IADP,CAC3BO,EAD2B,qBAC3BA,EAD2B,CACvBd,KADuB,qBACvBA,KADuB,CAChBC,KADgB,qBAChBA,KADgB,CAEhCS,QAAQ,CAACF,OAAO,CAACM,EAAD,CAAKd,KAAL,CAAYC,KAAZ,CAAmB,IAAnB,CAAR,CAAR,CACH,CAL0B,sDAAN,gEAAlB,CAOP,MAAO,IAAMc,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACd,KAAD,CAAQe,QAAR,CAAkBC,UAAlB,kGAAiC,kBAAOP,QAAP,0JACtCf,CAAAA,QAAQ,CAACuB,QAAT,CAAkBjB,KAAlB,CAAyBe,QAAzB,CAAmCC,UAAnC,CADsC,QACvDL,QADuD,gBAEvD,GAAIA,QAAQ,CAACL,IAAT,CAAcM,UAAd,GAA6B,CAAjC,CAAoC,CAChCH,QAAQ,CAACD,SAAS,EAAV,CAAR,CACH,CAFD,IAEO,CACHC,QAAQ,CAACd,UAAU,CAAC,WAAD,CAAc,CAACuB,MAAM,CAAEP,QAAQ,CAACL,IAAT,CAAca,QAAd,CAAuB,CAAvB,CAAT,CAAd,CAAX,CAAR,CAEH,CAPsD,wDAAjC,kEAAvB,CASP,MAAO,IAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACtC,gGAAO,kBAAOX,QAAP,0JACkBf,CAAAA,QAAQ,CAAC2B,cAAT,EADlB,QACCV,QADD,gBAES,GAAIA,QAAQ,CAACL,IAAT,CAAcM,UAAd,GAA6B,CAAjC,CAAoC,CACxCH,QAAQ,CAACF,OAAO,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAAmB,KAAnB,CAAR,CAAR,CACH,CAJF,wDAAP,iEAMH,CAPM,CASP,cAAeL,CAAAA,WAAf","sourcesContent":["import {usersAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SETAUTH = 'SETAUTH'\r\n\r\nlet initstate = {\r\n    userid: '',\r\n    login: '',\r\n    email: '',\r\n    isAuth: 'false'\r\n}\r\nconst reducerAuth = (state = initstate, action) => {\r\n    switch (action.type) {\r\n        case SETAUTH:\r\n            return {\r\n                ...state,\r\n                ...action.data\r\n\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport const SetAuth = (userid, login, email, isAuth) => ({type: SETAUTH, data: {userid, login, email, isAuth}})\r\nexport const AuthThunk = () => async (dispatch) => {\r\n    let response = await usersAPI.apiAuth()\r\n    if (response.data.resultCode === 0) {\r\n        let {id, login, email} = response.data.data\r\n        dispatch(SetAuth(id, login, email, true))\r\n    }\r\n}\r\nexport const AuthThunkLogin = (email, password, rememberMe) => async (dispatch) => {\r\n    let response = await usersAPI.apiLogin(email, password, rememberMe)\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(AuthThunk())\r\n        } else {\r\n            dispatch(stopSubmit('loginform', {_error: response.data.messages[0]}))\r\n\r\n        }\r\n}\r\nexport const AuthThunkDeleteLogin = () => {\r\n    return async (dispatch) => {\r\n        let response = await usersAPI.apiDeleteLogin()\r\n                    if (response.data.resultCode === 0) {\r\n                dispatch(SetAuth(null, null, null, false))\r\n            }\r\n    }\r\n}\r\n\r\nexport default reducerAuth"]},"metadata":{},"sourceType":"module"}