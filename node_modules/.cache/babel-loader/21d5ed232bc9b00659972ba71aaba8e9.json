{"ast":null,"code":"import { LoginAPI, usersAPI as loginAPI, usersAPI } from \"../api/api\";\nimport { stopSubmit } from \"redux-form\";\nconst SETAUTH = 'SETAUTH';\nconst DELETE_SETAUTH = 'DELETE_SETAUTH';\nlet initstate = {\n  userid: '',\n  login: '',\n  email: '',\n  isAuth: false\n};\n\nconst reducerAuth = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initstate;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SETAUTH:\n      return { ...state,\n        ...action.payload\n      };\n\n    case DELETE_SETAUTH:\n      return { ...state,\n        ...action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const SetAuth = (id, login, email, isAuth) => ({\n  type: SETAUTH,\n  payload: {\n    id,\n    login,\n    email,\n    isAuth\n  }\n});\n_c = SetAuth;\nexport const SetAuthdelete = (id, login, email, isAuth) => ({\n  type: DELETE_SETAUTH,\n  payload: {\n    id,\n    login,\n    email,\n    isAuth\n  }\n});\n_c2 = SetAuthdelete;\nexport const AuthThunk = dispatch => {\n  return dispatch => {\n    usersAPI.apiAuth().then(response => {\n      if (response.data.resultCode === 0) {\n        let {\n          id,\n          login,\n          email\n        } = response.data.data;\n        dispatch(SetAuth(id, login, email, true));\n        console.log(id);\n      }\n    });\n  };\n};\n_c3 = AuthThunk;\nexport const LoginThunk = (email, password, rememberMe) => dispatch => {\n  LoginAPI.authorize(email, password, rememberMe).then(response => {\n    if (response.data.resultCode === 0) {\n      dispatch(AuthThunk());\n    } else {\n      console.log(response.data.messages[0]);\n      let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Some error';\n      dispatch(stopSubmit('login', {\n        _error: message\n      }));\n    }\n  });\n};\nexport const deleteLogin = () => {\n  return dispatch => {\n    LoginAPI.deleteauthorize().then(response => {\n      if (response.data.resultCode === 0) {\n        dispatch(SetAuth(null, null, null, false));\n      }\n    });\n  };\n};\nexport default reducerAuth;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"SetAuth\");\n$RefreshReg$(_c2, \"SetAuthdelete\");\n$RefreshReg$(_c3, \"AuthThunk\");","map":{"version":3,"sources":["C:/React/Project/react2.0/src/Readux/Reducer-Auth.js"],"names":["LoginAPI","usersAPI","loginAPI","stopSubmit","SETAUTH","DELETE_SETAUTH","initstate","userid","login","email","isAuth","reducerAuth","state","action","type","payload","SetAuth","id","SetAuthdelete","AuthThunk","dispatch","apiAuth","then","response","data","resultCode","console","log","LoginThunk","password","rememberMe","authorize","messages","message","length","_error","deleteLogin","deleteauthorize"],"mappings":"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","sourcesContent":["import {LoginAPI, usersAPI as loginAPI, usersAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SETAUTH = 'SETAUTH'\r\nconst DELETE_SETAUTH = 'DELETE_SETAUTH'\r\n\r\nlet initstate = {\r\n    userid: '',\r\n    login: '',\r\n    email: '',\r\n    isAuth: false\r\n}\r\nconst reducerAuth = (state = initstate, action) => {\r\n    switch (action.type) {\r\n        case SETAUTH:\r\n           return {\r\n               ...state,\r\n               ...action.payload\r\n           }\r\n           case DELETE_SETAUTH:\r\n           return {\r\n               ...state,\r\n              ...action.payload\r\n           }\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport const SetAuth = (id,login,email,isAuth) => ({type: SETAUTH,payload:{id,login,email,isAuth}})\r\nexport const SetAuthdelete = (id,login,email,isAuth) => ({type: DELETE_SETAUTH,payload:{id,login,email,isAuth}})\r\nexport const AuthThunk = (dispatch)=> {\r\n    return (dispatch)=> {\r\n        usersAPI.apiAuth().then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                let {id,login,email} = response.data.data\r\n                dispatch(SetAuth(id,login,email,true))\r\n                console.log(id)\r\n           }\r\n    })\r\n}\r\n}\r\nexport const LoginThunk = (email,password,rememberMe)=>(dispatch)=> {\r\n        LoginAPI.authorize(email,password,rememberMe).then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(AuthThunk())\r\n           }\r\n            else {\r\n                console.log(response.data.messages[0])\r\n                let message = response.data.messages.length > 0 ? response.data.messages[0] :'Some error'\r\n                dispatch(stopSubmit('login',{_error: message}))\r\n            }\r\n    })\r\n}\r\n\r\nexport const deleteLogin = ()=> {\r\n    return (dispatch)=> {\r\n        LoginAPI.deleteauthorize().then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                dispatch(SetAuth(null,null,null,false))\r\n           }\r\n    })\r\n}\r\n}\r\n\r\nexport default reducerAuth"]},"metadata":{},"sourceType":"module"}