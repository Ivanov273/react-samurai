{"ast":null,"code":"import { LoginAPI, usersAPI as loginAPI, usersAPI } from \"../api/api\";\nconst SETAUTH = 'SETAUTH';\nconst SETLOGIN = 'SETLOGIN';\nlet initstate = {\n  userid: '',\n  login: '',\n  email: '',\n  isAuth: false,\n  rememberMe: false\n};\n\nconst reducerAuth = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initstate;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SETAUTH:\n      return { ...state,\n        ...action.data,\n        isAuth: true\n      };\n\n    case SETLOGIN:\n      return { ...state,\n        ...action.data,\n        rememberMe: true\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const SetAuth = (id, login, email) => ({\n  type: SETAUTH,\n  data: {\n    id,\n    login,\n    email\n  }\n});\n_c = SetAuth;\nexport const setLogin = (login, password, rememberMe) => ({\n  type: SETLOGIN,\n  login,\n  password,\n  rememberMe\n});\nexport const AuthThunk = dispatch => {\n  return dispatch => {\n    usersAPI.apiAuth().then(response => {\n      if (response.data.resultCode === 0) {\n        let {\n          id,\n          login,\n          email\n        } = response.data.data;\n        dispatch(SetAuth(id, login, email));\n      }\n    });\n  };\n};\n_c2 = AuthThunk;\nexport const LoginThunk = (login, password, rememberMe) => {\n  return dispatch => {\n    LoginAPI.authorize(login, password, rememberMe).then(response => {\n      if (response.data.resultCode === 0) {\n        //let {id,login,email} = response.data.data\n        dispatch(setLogin(login, password, rememberMe));\n      }\n    });\n  };\n};\n_c3 = LoginThunk;\nexport default reducerAuth;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"SetAuth\");\n$RefreshReg$(_c2, \"AuthThunk\");\n$RefreshReg$(_c3, \"LoginThunk\");","map":{"version":3,"sources":["C:/React/Project/react2.0/src/Readux/Reducer-Auth.js"],"names":["LoginAPI","usersAPI","loginAPI","SETAUTH","SETLOGIN","initstate","userid","login","email","isAuth","rememberMe","reducerAuth","state","action","type","data","SetAuth","id","setLogin","password","AuthThunk","dispatch","apiAuth","then","response","resultCode","LoginThunk","authorize"],"mappings":"AAAA,SAAQA,QAAR,EAAkBC,QAAQ,IAAIC,QAA9B,EAAwCD,QAAxC,QAAuD,YAAvD;AAEA,MAAME,OAAO,GAAG,SAAhB;AACA,MAAMC,QAAQ,GAAG,UAAjB;AAEA,IAAIC,SAAS,GAAG;AACZC,EAAAA,MAAM,EAAE,EADI;AAEZC,EAAAA,KAAK,EAAE,EAFK;AAGZC,EAAAA,KAAK,EAAE,EAHK;AAIZC,EAAAA,MAAM,EAAE,KAJI;AAKZC,EAAAA,UAAU,EAAE;AALA,CAAhB;;AAOA,MAAMC,WAAW,GAAG,YAA+B;AAAA,MAA9BC,KAA8B,uEAAtBP,SAAsB;AAAA,MAAXQ,MAAW;;AAC/C,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKX,OAAL;AACG,aAAO,EACH,GAAGS,KADA;AAEH,WAAGC,MAAM,CAACE,IAFP;AAGHN,QAAAA,MAAM,EAAG;AAHN,OAAP;;AAKA,SAAKL,QAAL;AACA,aAAO,EACH,GAAGQ,KADA;AAEH,WAAGC,MAAM,CAACE,IAFP;AAGHL,QAAAA,UAAU,EAAG;AAHV,OAAP;;AAKH;AACI,aAAOE,KAAP;AAdR;AAgBH,CAjBD;;AAkBA,OAAO,MAAMI,OAAO,GAAG,CAACC,EAAD,EAAIV,KAAJ,EAAUC,KAAV,MAAqB;AAACM,EAAAA,IAAI,EAAEX,OAAP;AAAeY,EAAAA,IAAI,EAAC;AAACE,IAAAA,EAAD;AAAIV,IAAAA,KAAJ;AAAUC,IAAAA;AAAV;AAApB,CAArB,CAAhB;KAAMQ,O;AACb,OAAO,MAAME,QAAQ,GAAG,CAACX,KAAD,EAAOY,QAAP,EAAgBT,UAAhB,MAAgC;AAACI,EAAAA,IAAI,EAAEV,QAAP;AAAgBG,EAAAA,KAAhB;AAAsBY,EAAAA,QAAtB;AAA+BT,EAAAA;AAA/B,CAAhC,CAAjB;AACP,OAAO,MAAMU,SAAS,GAAIC,QAAD,IAAa;AAClC,SAAQA,QAAD,IAAa;AAChBpB,IAAAA,QAAQ,CAACqB,OAAT,GAAmBC,IAAnB,CAAwBC,QAAQ,IAAI;AAChC,UAAIA,QAAQ,CAACT,IAAT,CAAcU,UAAd,KAA6B,CAAjC,EAAoC;AAChC,YAAI;AAACR,UAAAA,EAAD;AAAIV,UAAAA,KAAJ;AAAUC,UAAAA;AAAV,YAAmBgB,QAAQ,CAACT,IAAT,CAAcA,IAArC;AACAM,QAAAA,QAAQ,CAACL,OAAO,CAACC,EAAD,EAAIV,KAAJ,EAAUC,KAAV,CAAR,CAAR;AACJ;AACP,KALG;AAMP,GAPG;AAQH,CATM;MAAMY,S;AAUb,OAAO,MAAMM,UAAU,GAAG,CAACnB,KAAD,EAAOY,QAAP,EAAgBT,UAAhB,KAA8B;AACpD,SAAQW,QAAD,IAAa;AAChBrB,IAAAA,QAAQ,CAAC2B,SAAT,CAAmBpB,KAAnB,EAAyBY,QAAzB,EAAkCT,UAAlC,EAA8Ca,IAA9C,CAAmDC,QAAQ,IAAI;AAC3D,UAAIA,QAAQ,CAACT,IAAT,CAAcU,UAAd,KAA6B,CAAjC,EAAoC;AAChC;AACAJ,QAAAA,QAAQ,CAACH,QAAQ,CAACX,KAAD,EAAOY,QAAP,EAAgBT,UAAhB,CAAT,CAAR;AACJ;AACP,KALG;AAMP,GAPG;AAQH,CATM;MAAMgB,U;AAWb,eAAef,WAAf","sourcesContent":["import {LoginAPI, usersAPI as loginAPI, usersAPI} from \"../api/api\";\r\n\r\nconst SETAUTH = 'SETAUTH'\r\nconst SETLOGIN = 'SETLOGIN'\r\n\r\nlet initstate = {\r\n    userid: '',\r\n    login: '',\r\n    email: '',\r\n    isAuth: false,\r\n    rememberMe: false\r\n}\r\nconst reducerAuth = (state = initstate, action) => {\r\n    switch (action.type) {\r\n        case SETAUTH:\r\n           return {\r\n               ...state,\r\n               ...action.data,\r\n               isAuth : true\r\n           }\r\n           case SETLOGIN:\r\n           return {\r\n               ...state,\r\n               ...action.data,\r\n               rememberMe : true\r\n           }\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport const SetAuth = (id,login,email) => ({type: SETAUTH,data:{id,login,email}})\r\nexport const setLogin = (login,password,rememberMe) => ({type: SETLOGIN,login,password,rememberMe})\r\nexport const AuthThunk = (dispatch)=> {\r\n    return (dispatch)=> {\r\n        usersAPI.apiAuth().then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                let {id,login,email} = response.data.data\r\n                dispatch(SetAuth(id,login,email))\r\n           }\r\n    })\r\n}\r\n}\r\nexport const LoginThunk = (login,password,rememberMe)=> {\r\n    return (dispatch)=> {\r\n        LoginAPI.authorize(login,password,rememberMe).then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                //let {id,login,email} = response.data.data\r\n                dispatch(setLogin(login,password,rememberMe))\r\n           }\r\n    })\r\n}\r\n}\r\n\r\nexport default reducerAuth"]},"metadata":{},"sourceType":"module"}